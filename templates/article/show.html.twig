{% extends "base.html.twig" %}

{% block title %}{{ article.title }}{% endblock %}

{% block body %}
      <div class="container py-3">
        <!-- Header -->
        <header class="post__header d-flex flex-column text-center">
            <h1>{{ article.title }}</h1>
            <img src="{{ author.avatar_link }}" class="img-thumbnail rounded-circle mx-auto" alt="Auteur de l'article">
            <a class="text-decoration-none" href="{{ path('app_user_show', { id: author.id }) }}">
              <h2 class="fw-bold">{{ author.username }}</h2>
            </a>
            {% if author.job %}
                <h3 class="text-muted fw-lighter fst-italic">{{ author.job }}</h3>
            {% endif %}
            <hr>
            <aside class="d-flex flex-row align-items-center justify-content-between text-muted fst-italic fs-5">
                <p>{{ article.tags|join(', ') }}</p>
                <p>{{ article.createdAt|ago(locale='fr') }}</p>
            </aside>
        </header>
        <!-- Main -->
        <main class="post__main">
            <div class="row">
                <div class="post__content col-12 col-md-9 fs-5">
                  <img class="img-fluid" src="{{ article.thumbnailUrl }}" alt="{{ article.title }}">
                  <h1 class="display-5 text-center my-5">{{ article.title }}</h1>

                  {# If article not validated #}
                  {% if article.isValidated != true %}
                  <div class="alert alert-warning">Cet article est en cours de relecture par la rédaction ou n'a pas été validé par celle-ci. C'est pourquoi elle n'est pas mise en avant.</div>
                  {% endif %}
                  {# Edit button #}
                  {% if is_granted('ROLE_EDITOR') %}
                  <div class="mb-5">
                      <a href="{{ path('app_article_edit', { slug: article.slug } ) }}" class="btn btn-primary">Modifier l'article</a>
                  </div>
                  {% endif %}

                  {{ article.content|raw }}
                  
                </div>
                <!-- Similar posts -->
                <aside class="post__aside col-12 col-md-3">
                    <div class="d-flex flex-column sticky-top">
                        <h3 class="mt-3">Articles similaires</h3>
                        <hr>
                        <!-- Similar post -->
                        {% for similar in similarArticles %}
                          <a href="{{ path('app_article_show', { slug: similar.slug }) }}" class="text-decoration-none my-2">
                            <div class="card">
                                <div class="card-body">
                                  <h5 class="card-title text-light">{{ similar.title }} &#10132;</h5>
                                </div>
                            </div>
                        </a>
                        {% endfor %}
                    </div>
                </aside>
            </div>
        </main>
        <!-- Comments -->
        <hr>
        <section class="post__comments mt-5">
          <h2>Commentaires</h2>
          <!-- Comment Form -->
          <div class="post__comment-form d-flex flex-column flex-lg-row align-items-center gap-4">
            <img src="https://picsum.photos/150" class="img-thumbnail rounded-circle" alt="...">
            <div class="card shadow-sm w-100">
              <div class="card-body">
                <form action="#" method="post">
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">Votre adresse mail</label>
                    <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
                  </div>
                  <div class="mb-3">
                    <label for="exampleFormControlInput1" class="form-label">Votre prénom</label>
                    <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
                  </div>
                  <div class="mb-3">
                    <label for="exampleFormControlTextarea1" class="form-label">Votre commentaire</label>
                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <ul>
            <!-- Comment -->
            <li class="post__comment card shadow mt-3">
              <div class="card-body row">
                <div class="d-flex flex-column flex-lg-row align-items-center justify-content-between gap-4">
                  <img src="https://picsum.photos/140" class="img-thumbnail rounded-circle col-12 col-md-3 mx-auto" alt="...">
                  <div class="col-12 col-md-9">
                    <div class="d-flex flex-row align-items-center justify-content-between text-muted">
                      <h4>John Doe</h4>
                      <p>Il y a 1 jour</p>
                    </div>
                    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Rerum quo dolorem accusamus, corporis, ut inventore omnis commodi fuga magni blanditiis nesciunt aut sapiente maiores voluptatum sed quae! Corrupti, voluptatibus pariatur.</p>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae architecto veritatis tenetur. Aut similique deleniti quo, nemo sequi ipsam vel dolorum tempore harum blanditiis fugit et odit praesentium. Quis, fugiat.</p>
                  </div>
                </div>
              </div>
            </li>
            <!-- Comment -->
            <li class="post__comment card shadow mt-3">
              <div class="card-body row">
                <div class="d-flex flex-column flex-lg-row align-items-center justify-content-between gap-4">
                  <img src="https://picsum.photos/140" class="rounded-circle col-12 col-md-3 m-auto" alt="...">
                  <div class="col-12 col-md-9">
                    <div class="text-muted">
                      <h4>John Doe</h4>
                      <p>Il y a 1 jour</p>
                    </div>
                    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Rerum quo dolorem accusamus, corporis, ut inventore omnis commodi fuga magni blanditiis nesciunt aut sapiente maiores voluptatum sed quae! Corrupti, voluptatibus pariatur.</p>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </section>
      </div>
{% endblock %}