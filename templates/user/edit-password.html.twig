{% extends 'base.html.twig' %}

{% block title %}{{ user.username }}{% endblock %}

{% block body %}
    <div class="container my-4 col-12 col-md-6 col-lg-4">


        {{ form_start(form, {
            attr: {
                class: 'auth-form p-4'
            }
        }) }}

            <h1>Modifier votre mot de passe</h1>
            <p><span class="fw-bold">Attention :</span> Vous êtes sur une version de test de Codersaurus Rex ! Il n'est donc pas possible de changer le mot de passe du compte de test (sinon plus personne ne pourrait se connecter avec).</p>

            {# Current Password #}
            <div class="mb-4">
                {{ form_label(form.currentPassword, 'Mot de passe actuel', {
                    label_attr: {
                        class: 'form-label'
                    }
                }) }}
                {{ form_widget(form.currentPassword, {
                    attr: {
                        'type': 'password',
                        'class': 'form-control'
                    }
                }) }}
                {{ form_help(form.currentPassword, {
                    help_attr: {
                        class: 'form-text'
                    }
                }) }}
                {# Error #}
                {% if form_errors(form.currentPassword) %}
                    <div class="text-danger">{{ form_errors(form.birthday) }}</div>
                {% endif %}
            </div>
            
            {# New Password #}
            <div class="mb-4">
                {{ form_label(form.newPassword.first, 'Nouveau mot de passe', {
                    label_attr: {
                        class: 'form-label'
                    }
                }) }}
                {{ form_widget(form.newPassword.first, {
                    attr: {
                        'class': 'form-control',
                    }
                }) }}
                {{ form_help(form.newPassword.first, {
                    help_attr: {
                        class: 'form-text'
                    }
                }) }}
                {# Error #}
                {% if form_errors(form.newPassword.first) %}
                    <div class="text-danger">{{ form_errors(form.newPassword.first) }}</div>
                {% endif %}
            </div>

            {# Repeat New Password #}
            <div class="mb-4">
                {{ form_label(form.newPassword.second, 'Répétez votre nouveau mot de passe', {
                    label_attr: {
                        class: 'form-label'
                    }
                }) }}
                {{ form_widget(form.newPassword.second, {
                    attr: {
                        'class': 'form-control',
                    }
                }) }}
                {{ form_help(form.newPassword.second, {
                    help_attr: {
                        class: 'form-text'
                    }
                }) }}
                {# Error #}
                {% if form_errors(form.newPassword.second) %}
                    <div class="text-danger">{{ form_errors(form.newPassword.second) }}</div>
                {% endif %}
            </div>


            {# Submit #}
            <div class="mb-4 d-flex flex-column flex-lg-row justify-content-between align-items-center">
                <button type="submit" class="btn btn-primary mb-3 mb-lg-0">Mettre à jour</button>
                <a href="{{ path('app_user_edit', { id: user.id })}}" class="btn btn-secondary">Revenir au profil</a>
            </div>

        {{ form_end(form) }}

    </div>
{% endblock %}
