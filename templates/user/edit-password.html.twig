{% extends 'base.html.twig' %}

{% block title %}{{ user.username }}{% endblock %}

{% block body %}
    <div class="container my-4 col-12 col-md-6 col-lg-4">


        {{ form_start(form, {
            attr: {
                class: 'auth-form p-4'
            }
        }) }}

            <h1>Modifier votre mot de passe</h1>

            {# Current Password #}
            <div class="mb-4">
                {{ form_label(form.current_password, 'Mot de passe actuel', {
                    label_attr: {
                        class: 'form-label'
                    }
                }) }}
                {{ form_widget(form.current_password, {
                    attr: {
                        'type': 'password',
                        'class': 'form-control'
                    }
                }) }}
                {{ form_help(form.current_password, {
                    help_attr: {
                        class: 'form-text'
                    }
                }) }}
                {# Error #}
                {% if form_errors(form.current_password) %}
                    <div class="text-danger">{{ form_errors(form.birthday) }}</div>
                {% endif %}
            </div>
            
            {# New Password #}
            <div class="mb-4">
                {{ form_label(form.new_password.first, 'Nouveau mot de passe', {
                    label_attr: {
                        class: 'form-label'
                    }
                }) }}
                {{ form_widget(form.new_password.first, {
                    attr: {
                        'class': 'form-control',
                    }
                }) }}
                {{ form_help(form.new_password.first, {
                    help_attr: {
                        class: 'form-text'
                    }
                }) }}
                {# Error #}
                {% if form_errors(form.new_password.first) %}
                    <div class="text-danger">{{ form_errors(form.new_password.first) }}</div>
                {% endif %}
            </div>

            {# Repeat New Password #}
            <div class="mb-4">
                {{ form_label(form.new_password.second, 'Répétez votre nouveau mot de passe', {
                    label_attr: {
                        class: 'form-label'
                    }
                }) }}
                {{ form_widget(form.new_password.second, {
                    attr: {
                        'class': 'form-control',
                    }
                }) }}
                {{ form_help(form.new_password.second, {
                    help_attr: {
                        class: 'form-text'
                    }
                }) }}
                {# Error #}
                {% if form_errors(form.new_password.second) %}
                    <div class="text-danger">{{ form_errors(form.new_password.second) }}</div>
                {% endif %}
            </div>


            {# Submit #}
            <div class="mb-4 d-flex flex-column flex-lg-row justify-content-between align-items-center">
                <button type="submit" class="btn btn-primary mb-3 mb-lg-0">Mettre à jour</button>
                <a href="{{ path('app_user_edit', { id: user.id })}}" class="btn btn-secondary">Revenir au profil</a>
            </div>

        {{ form_end(form) }}

    </div>
{% endblock %}
